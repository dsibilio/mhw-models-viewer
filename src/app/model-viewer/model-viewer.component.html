<div id="category-tree-container">
  <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding [matTreeNodePaddingIndent]="10"
      (click)=selectCategory(node.name) class="list-item"
      [ngClass]="{ 'selected-list-item' : node.name === selectedCategory }">
      <button mat-icon-button disabled></button>

      <ng-container *ngIf="node.type === 'folder'; else specificIconTemplate">
        <mat-icon class="type-icon" [attr.aria-label]="node.type + 'icon'">
          {{ node.type }}
        </mat-icon>
      </ng-container>
      <ng-template #specificIconTemplate>
        <img [src]="'assets/icons/' + node.type + '_' + node.id + '.png'" class="node-icon">
      </ng-template>

      {{node.name}}
    </mat-tree-node>

    <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding
      class="list-item">
      <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.name">
        <mat-icon class="mat-icon-rtl-mirror">
          {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
        </mat-icon>
      </button>
      <ng-container *ngIf="node.type === 'folder'; else specificIconTemplate">
        <mat-icon class="type-icon" [attr.aria-label]="node.type + 'icon'">
          {{ node.type }}
        </mat-icon>
      </ng-container>
      {{node.name}}
    </mat-tree-node>
  </mat-tree>
</div>

<div id="model-viewer-container">
  <form class="filter-form" (ngSubmit)=onFilterSubmit()>
    <mat-form-field class="filter-input">
      <input type="text" placeholder="Find a model..." aria-label="Find a model" matInput
        [formControl]="filterFormControl" [matAutocomplete]="auto" (blur)="resetFilterForm()">
      <mat-autocomplete #filterAutocomplete autoActiveFirstOption #auto="matAutocomplete">
        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
          {{option}}
        </mat-option>
      </mat-autocomplete>
      <div *ngIf="filterSubmitted && filterFormControl.errors" class="invalid-feedback">
        {{ filterFormControl.errors['filterFormControl'] }}
      </div>
    </mat-form-field>
  </form>
  <canvas class="3dviewer"
    sourcefiles="assets/wp/bow/bow001/bow001.obj|assets/wp/bow/bow001/bow001.mtl|assets/wp/bow/bow001/bow001_BML.PNG"
    width="700%" height="700%"></canvas>
</div>

<div id="model-list-container">
  <div *ngFor="let alias of getAliasesByCategory(selectedCategory)">
    <p class="compact-list-item" (click)=selectModelByAlias(alias)
      [ngClass]="{'selected-list-item': alias === selectedAlias}">
      {{ alias }}
    </p>
  </div>
</div>